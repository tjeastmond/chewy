#!/usr/bin/env node

import { existsSync } from 'node:fs'
import path from 'node:path'
import { fileURLToPath } from 'node:url'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)

const distCliPath = path.resolve(__dirname, '../dist/cli.js')

if (!existsSync(distCliPath)) {
  // Keep the output readable (especially when invoked from other scripts).
  console.error('\nchewy (alias for export-resume): missing build output at dist/cli.js\n\nRun: pnpm build\n')
  process.exitCode = 1
} else {
  const mod = await import(distCliPath)
  if (typeof mod.runCli !== 'function') {
    console.error('\nchewy (alias for export-resume): dist/cli.js did not export runCli()\n')
    process.exitCode = 1
  } else {
    mod.runCli()
  }
}
